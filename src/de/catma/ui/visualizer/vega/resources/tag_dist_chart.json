{
   "$schema":"https://vega.github.io/schema/vega-lite/v2.0.json",
   "description":"A simple tag based distribution chart with tag start offsets binned to 10 percent chunks and facets for each Source Document",
   "data":{
      "url":"CATMA_QUERY_URL"
   },
   "facet":{
      "row":{
         "field":"sourceDocumentTitle",
         "type":"nominal"
      }
   },
   "spec":{
      "transform":[
         {
            "calculate":"datum.startOffset/datum.sourceDocumentSize*100",
            "as":"relStartOffset"
         }
      ],
      "layer":[
         {
            "mark":"line",
            "encoding":{
               "x":{
                  "field":"relStartOffset",
                  "bin":{
                     "maxbins":10
                  },
                  "type":"quantitative",
                  "axis":{
                     "title":"relative startoffset binned in 10 steps"
                  }
               },
               "y":{
                  "aggregate":"count",
                  "field":"tagPath",
                  "type":"quantitative",
                  "axis":{
                     "title":"Occurrences"
                  }
               },
               "color":{
                  "field":"tagPath",
                  "type":"nominal"
               }
            }
         },
         {
            "mark":"point",
            "encoding":{
               "x":{
                  "field":"relStartOffset",
                  "bin":{
                     "maxbins":10
                  },
                  "type":"quantitative"
               },
               "y":{
                  "aggregate":"count",
                  "field":"tagPath",
                  "type":"quantitative"
               },
               "color":{
                  "field":"tagPath",
                  "type":"nominal"
               }
            }
         }
      ]
   }
}